---
category: "project"
tags: 
  - "blog"
  - "project"
  - "vocabo"
  - "web"
  - "nodejs"
  - "react"
banner: "/assets/bg/3.jpg"
---

## vocabo 프로젝트 되살리기 3

1. `app.js`에서 cors를 잘못 쓰고 있던 것 바꾸어서 cors 문제 해결. `app.use(cors)`가 아니라, `app.use(cors())`로 해야 한다.

2. api Gateway에서 커스텀 도메인을 시도했더니 404에러가 나서 왜인가 하고 `aws-express-serverless`저장소쪽 이슈를 찾아보니 같은 걸 시도하는 사람이 있었다. 그 이슈를 참고하여 새로운 패키지를 설치해서 해결함.
3. 글씨체 강제로 sans-serif 쓰도록 바꿈.

4. 크롬에서 작동 확인 완료.

5. 사전 교체: 
[한국어기초사전](https://krdict.korean.go.kr/)에서 매우 질 좋은 사전 정보를 제공하여 이걸 쓰기로 함. 다만 한 단어에 대해 모든 표제어(뜻)들이 상세하게 되어 있어 어떻게 압축하여 나열할 지 생각해야 한다. 영어 대역어가 비어있는 경우가 있어 이를 무시하기 위해 액셀 데이터를 액세스에서 로드한 다음 다음과 같이 쿼리하여 압축된 정보를 추출했다.

```sql
SELECT Sheet0.표제어, Sheet0.뜻풀이, Sheet0.[영어 대역어], Sheet0.[영어 대역어 뜻풀이]
FROM Sheet0
WHERE [영어 대역어] <> '';
```

그리고, 액세스 쿼리 결과 테이블을 엑셀로 내보내기 한 뒤, 다시 쉼표 기반 txt 파일로 내보냈다. 그 다음 메모장에서 열어서 utf-8로 바꾸고 [이 사이트](https://www.csvjson.com/csv2json)에 텍스트 파일을 업로드하여 minified-json으로 변환했다.


마지막으로 `json`파일을 s3에 올린 뒤 `dictionary.js`의 url을 해당 파일 위치로 업데이트하고 서버를 다시 업데이트한 결과 제대로 사전이 교체되었다. 확실히 더 나은 퀄리티를 보여준다.

교체는 성공했고 출처 표시, 다의어 처리 및 빠진 단어 제외 기능을 넣어야 한다. 그리고 람다에서 타깃 노드 버전도 10 또는 12로 업데이트해야 한다.

몇가지 영어 대역어가 빠진 경우가 있어서 다시 확인해보려 하는데, 알고보니 제대로 sql 적용이 안 되었던 것이었고, ms access에서 바로 csv로 내보내기 가능하다.
다시 업로드하니 빠진 단어가 없어졌다. 이것으로 일단 기본적인 단어장 기능은 사용 가능하게 되었다.
