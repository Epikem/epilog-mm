---
date: "2021-07-19"
title: "log 2021-07-19"
categories: "blog"
tags: ["blog", "ci-cd", "project/pseudo"]
---

----------

- [github actions 연동 완료](#github-actions-연동-완료)
- [pseudo - 프로필 스키마 작업 2 - 통계 계산 모듈 추가](#pseudo---프로필-스키마-작업-2---통계-계산-모듈-추가)

## github actions 연동 완료

많은 테스트 끝에 일단 연동 완료했다. 다만 제대로 활용하려면 몇 가지 설정이 더 필요할 듯하다.

- 수동 연도 업데이트 필요
- 이미지 업로드 방안 개선 필요 (깃헙 이슈 활용?)
- 태그 이름 변경 등 관리
- 포스트 목록에서 요약 등 노출
- 기본 포스트 목록에서 log포스트 제외
- github actions 러너에서 캐시 활용

<https://stackoverflow.com/questions/61537403/how-to-host-image-at-https-user-images-githubusercontent-com-path-filename>

위 링크의 답변에 따르면, ... 이슈를 사용하면 되긴 하는데, 불편하다.

근데, 완성한 핸들러로 ci 실행도중 불특정한 포스트에서 에러가 나는데, ci 에러 로그를 확인하니 에러 시점과 실행 로그가 타이밍이 섞여 나오는 것으로 어디선가 비동기 실행이 남아있다고 판단, `readdir`를 `readdirSync`로 바꾸어 해결했다.

아쉽게도, ci를 셋업하면서 러너가 클론을 하고 접근해서인지 github 내의 트래픽이 엄청 늘었다. 진짜 방문과 구별할 방법이 없어졌다.

## pseudo - 프로필 스키마 작업 2 - 통계 계산 모듈 추가

agenda 잡 셋업 완료.
통계 적용시에는 어떤 시점에 어떤 기록을 가졌었는지 알 필요가 있지 않을까 싶다. (나중에 포인트 그래프라던가, 달성과제 같은 시스템을 추가할 경우 대비)
따라서 현재의 각 통계 상태를 계속 추가하는 다른 테이블이 필요할 듯하다.

통계 적용 절차에 대해 좀더 생각해보아야 한다.
생각해보면, 유저가 쓴 포스트나 활동의 수 등 기초 자료로부터 포인트와 클래스를 계산하는 과정이다.

그러면 기초 자료가 어떤것이 될 지, 포인트와 클래스 등 중간 계산 결과는 어떻게 될 지 알아야 한다.

----------
